openapi: 3.0.0
info:
  version: 0.1.0
  title: ForgedFed Discovery Service
  description: 'This service is used to discover bridge interfaces that operate on forges. More information about this can be found on [GitHub](https://github.com/dat-adi/northstar)'
  license:
    name: AGPL3
    url: 'https://www.gnu.org/licenses/agpl-3.0-standalone.html'
  contact:
    name: ForgedFed Developers
    email: 'dat.adithya@gmail.com, realaravinth@batsense.net'
servers:
  - url: 'http://example.com'
tags:
  - name: interface
    description: A bridge component that talks the bridge protocol and is able to affect changes to the forge that it manages.
    externalDocs:
      description: Find out more about interfaces
      url: 'https://github.com/dat-adi/forgedfed-spec/blob/master/rfc/1-ecosystem-architecture/1-ecosystem-architecture.md'
paths:
  /api/v1/interface/register:
    post:
      tags:
        - interface
      summary: Add an interface to the discovery service
      operationId: registerInterface
      requestBody:
        description: Interface object that needs to be added to the discovery service
        required: true
        content:
          application/json:
            schema:
              RegisterInterfaceObject:
                type: object
                properties:
                  interface_url:
                    description: The publicly accessible URL of the bridge interface
                    type: string
                  forge_url:
                    description: 'The publicly accessible URL of the forge that this interface manages. If a forge is known by more than one URL(separate bug tracker, and different fetch and push URLs for git), then mention them all in this field'
                    type: array
                    example:
                      forge_url:
                        - 'https://git.sr.ht/~sircmpwn/paste.sr.ht'
                        - 'git@git.sr.ht:~sircmpwn/paste.sr.ht'
                        - 'https://lists.sr.ht/~sircmpwn/sr.ht-discuss'
                      items: null
                      type: string
                      example:
                        interface_url: 'https://forgedfed-interface.example.com'
